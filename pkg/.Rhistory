df$DT <- as.Date(df$DT, '%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
head(df,20)
head(df,50)
df$Coef <- log(df$Coef)
head(df,50)
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot()
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
# df$Coef <- log(df$Coef)
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot()
# Теперь делаем суммы по каждым трем датам, чтобы собрать квартальные отчеты и присоединим колонку к data.sub
data.plot <- matrix(nrow=0,ncol=5)
colnames(data.plot) <- c("REGN", "DT", "Equity", "Income", "Coef")
for (i in regnums) {
sub <- subset(data101.sub, REGN == i)
sub$DT <- as.character(sub$DT)
for (j in 2:length(dates2)) {
equity <- subset(sub, DT <= dates2[j])
equity <- subset(equity, DT > dates2[j-1])
equity$Equity <- as.numeric(as.character(equity$Equity))
equity <- sum(equity$Equity)
income <- subset(data102.sub, REGN == i & DT == dates2[j])
income$Income <- as.numeric(as.character(income$Income))
income <- sum(income$Income)
data.plot <- rbind(data.plot, c(i, dates2[j], equity, income, income/equity))
}
message(i, ' / ', regnums[length(regnums)])
}
head(data.plot)
head(df)
nrow(df)
nrow(df)
df <- cbind(df, df$Coef)
head(df)
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot()
head(plot)
head(ff)
head(df)
head(df,50)
plot <- ggplot(data=df, aes(DT, Coef))
plot + geom_boxplot()
qplot(DT, Coef, data=df, geom=c("boxplot", "jitter"),
fill=DT, main="Mileage by Gear Number",
xlab="", ylab="Miles per Gallon")
qplot(DT, Coef, data=df, geom=c("boxplot"),
fill=DT, main="Mileage by Gear Number",
xlab="", ylab="Miles per Gallon")
plot <- ggplot(data=df, aes(DT, Coef))
plot + geom_boxplot()
plot <- ggplot(data=df, aes(DT, Coef))
plot + geom_boxplot()
plot + scale_x_date(labels = date_format("%Y"))
plot + geom_boxplot() + scale_x_date(labels = date_format("%Y"))
plot + geom_boxplot() +
scale_x_date(labels = date_format("%Y"))
typeof(df[1,2])
head(df)
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
typeof(df[1,2])
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
typeof(df[1,2])
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
# df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(DT, Coef))
plot + geom_boxplot() +
scale_x_date(labels = date_format("%Y"))
plot <- ggplot(data=df, aes(DT, Coef))
plot + geom_boxplot()
head(df)
plot + geom_boxplot() +
scale_x_date(labels = date_format("%Y-%m-%d"))
rm(sub, equity, income, i, j)
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
head(df)
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, '%Y-%m-%d')
df[1,2]
head(df)
df[1,2]
as.Date(df[1,2], '%Y-%m-%d')
as.Date(df[1,2], '%Y-%m-%d')
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df[1,2]
head(df)
as.Date(Sys.Date)
as.Date(Sys.Date())
typeof(as.Date(Sys.Date()))
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
typeof(df[1,2])
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
typeof(df[1,2])
head(df)
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot()
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
scale_x_date(labels = date_format("%Y"))
plot <- ggplot(data=df, aes(factor(as.Date(DT, format='%Y-%m-%d')), Coef))
plot + geom_boxplot() +
scale_x_date(labels = date_format("%Y"))
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
scale_x_continuous()
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
scale_x_discrete()
plot + geom_boxplot() +
ggtitle('sdafasdfsfd')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('sdafasdfsfd') +
scale_x_discrete(name='Volume, millions of rubles')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels(1:30)) +
scale_y_discrete(name='Date')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels(2004:2013)) +
scale_y_discrete(name='Date')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', breaks = 1:5) +
scale_y_discrete(name='Date')
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
# df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
# df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
#уберем лишнее
df <- subset(data.plot, REGN != 2189 & REGN != 2083)
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
# df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
#уберем лишнее
df <- data.plot
df$Coef <- as.numeric(as.character(df$Coef))
# df <- cbind(df, df$Coef)
# for(i in 2:nrow(df)) {
#
# }
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
# df$DT <- format(df$DT, format="%m/%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
#уберем лишнее
df <- data.plot
df$Coef <- as.numeric(as.character(df$Coef))
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%m-%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coeffic
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
#уберем лишнее
df <- data.plot
df$Coef <- as.numeric(as.character(df$Coef))
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%m-%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
#уберем лишнее
df <- data.plot
df$Coef <- as.numeric(as.character(df$Coef))
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
df$DT <- format(df$DT, format="%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + geom_boxplot() +
ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date')
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date') +
geom_boxplot() +
geom_jitter()
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date') +
geom_boxplot()
#уберем лишнее
df <- data.plot
df$Coef <- as.numeric(as.character(df$Coef))
df$Coef <- log(df$Coef)
df$Coef <- round(df$Coef, 4)
df <- df[apply(df, 1, function(row) all(row !=0 )),]
df$DT <- as.Date(df$DT, format='%Y-%m-%d')
# df$DT <- format(df$DT, format="%Y")
# Нарисуем box-plot
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date') +
geom_boxplot()
load("~/Documents/R packages/cbrAPI/.RData")
library("ggplot2")
library("scales")
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels=NULL) +
scale_y_discrete(name='Date') +
geom_boxplot()
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date') +
geom_boxplot()
dates2[-1]
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels=dates2[-1]) +
scale_y_discrete(name='Date') +
geom_boxplot()
dates2
seq(1,45)
seq(1,45,4)
seq(1,length(dates2),4)
dates[seq(1,length(dates2),4)]
dates2[seq(1,length(dates2),4)]
dates2[seq(2,length(dates2),4)]
dates2[seq(2,length(dates2),4)] <- ''
dates2
load("~/Documents/R packages/cbrAPI/.RData")
labels <- dates2[-1]
labels
labels[seq(1,length(dates2),4)]
seq(1,length(dates2),4)
seq(3,length(dates2),4)
labels[seq(3,length(dates2),4)]
labels <- dates2[-1]
labels[seq(4,length(dates2),4)]
labels <- rep('', length(dates2))
labels
labels[seq(4,length(dates2),4)] <- dates2[-1]
labels
dates2[seq(4,length(dates2),4)]
labels <- rep('', length(dates2))
labels[seq(4,length(dates2),4)] <- dates2[seq(5,length(dates2),4)]
labels
labels <- rep('', length(dates2))
labels[seq(4,length(dates2),4)] <- dates2[seq(5,length(dates2),4)]
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels=labels) +
scale_y_discrete(name='Date') +
geom_boxplot()
labels <- rep('', length(dates2))
labels[seq(4,length(dates2),4)] <- 2005:2015
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels=labels) +
scale_y_discrete(name='Date') +
geom_boxplot()
labels
library("ggplot2")
library("scales")
labels <- rep('', length(dates2))
labels[seq(4,length(dates2),4)] <- 2005:2015
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient') +
scale_y_discrete(name='Date') +
geom_boxplot()
labels <- rep('', length(dates2))
labels[seq(4,length(dates2),4)] <- 2005:2015
plot <- ggplot(data=df, aes(factor(DT), Coef))
plot + ggtitle('Box plot') +
scale_x_discrete(name='Coefficient', labels=labels) +
scale_y_discrete(name='Date') +
geom_boxplot()
library(cbrAPI)
library(roxygen2)
roxygenise()
library(devtools)
library(cbrAPI)
build_vignettes()
vignette()
check()
library(cbrAPI)
library(cbrAPI)
vignette()
vignette('cbrAPI')
?vignette
vignette(package = 'cbrAPI')
vignette('Bar_chart', package = 'cbrAPI')
